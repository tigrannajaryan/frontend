<ion-header class="bb-wp-a ion-bb-header"><ion-navbar></ion-navbar></ion-header>

<ion-content padding class="Appointment-content">
  <ion-row justify-content-center align-items-center>
    <div class="Appointment-pic">
      <i class="bb-icon bb-icon-add-appointment"></i>
    </div>
  </ion-row>

  <form [formGroup]="form" class="Appointment-form" (ngSubmit)="submit()">
    <ion-item class="Input">
      <ion-label>Client’s name</ion-label>
      <ion-input type="text" placeholder="Enter full name" formControlName="client" (focus)="search()" (keyup)="clearSelectedClient()" (input)="search()" (blur)="clearClientsList()"></ion-input>
    </ion-item>

    <div class="Appointment-customersList" *ngIf="clientsList">
      <div *ngFor="let client of clientsList" (click)="selectClient(client)" class="Appointment-customersListItem">
        {{ client.first_name }} {{ client.last_name }}
      </div>
    </div>

    <ion-item class="Input">
      <ion-label>Client’s phone number</ion-label>
      <ion-input type="tel" placeholder="Enter number" formControlName="phone" [disabled]="selectedClient"></ion-input>
    </ion-item>

    <div class="Input Appointment-service">
      <ion-label>Service</ion-label>
      <button ion-button clear (click)="selectService($event)" class="Input-btn" [ngClass]="{ 'is-muted': !selectedService }">
        {{ selectedService ? selectedService.name : 'Select from service list' }}
      </button>
    </div>

    <div class="Input">
      <ion-label>Date</ion-label>
      <button ion-button clear (click)="selectDate($event)" class="Input-btn" [ngClass]="{ 'is-muted': !selectedDate }">
        {{ selectedDate ? moment(selectedDate.date).format('D MMMM, YYYY') : 'Choose date'}}
      </button>
    </div>

    <ion-item class="Input">
      <ion-label>Time</ion-label>
      <ion-datetime displayFormat="h:mm a" pickerFormat="h mm A" placeholder="Select time" formControlName="time" [minuteValues]="minuteValues"></ion-datetime>
    </ion-item>

    <ion-item class="Appointment-submit" text-center>
      <button type="submit" [disabled]="form.invalid" ion-button icon-only clear>
        <i class="bb-icon bb-icon-plus"></i>
      </button>
    </ion-item>
  </form>
</ion-content>
